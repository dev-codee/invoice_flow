{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Account — InvoiceFlow</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Design System -->
  <link rel="stylesheet" href="{% static 'css/invoiceflow.css' %}">
</head>
<body class="auth-body">

  <div class="auth-layout">

    <!-- Left panel: branding -->
    <div class="auth-panel-left">
      <div class="auth-panel-inner">
        <div class="auth-brand">
          <div class="auth-brand-logo">
            <i class="bi bi-receipt-cutoff"></i>
          </div>
          <div class="auth-brand-name">Invoice<span>Flow</span></div>
        </div>
        <h1 class="auth-panel-headline">Start invoicing<br><em>for free today.</em></h1>
        <p class="auth-panel-sub">Join thousands of freelancers and businesses who trust InvoiceFlow for fast, reliable billing.</p>

        <div class="auth-features">
          <div class="auth-feature-item">
            <div class="auth-feature-icon"><i class="bi bi-check2-all"></i></div>
            <div>
              <div class="auth-feature-title">Free to Get Started</div>
              <div class="auth-feature-desc">No credit card required. Up and running in minutes.</div>
            </div>
          </div>
          <div class="auth-feature-item">
            <div class="auth-feature-icon"><i class="bi bi-people-fill"></i></div>
            <div>
              <div class="auth-feature-title">Multi-Org Support</div>
              <div class="auth-feature-desc">Manage multiple businesses from one account.</div>
            </div>
          </div>
          <div class="auth-feature-item">
            <div class="auth-feature-icon"><i class="bi bi-bell-fill"></i></div>
            <div>
              <div class="auth-feature-title">Smart Reminders</div>
              <div class="auth-feature-desc">Automated follow-ups for overdue invoices.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right panel: form -->
    <div class="auth-panel-right">
      <div class="auth-form-wrap">
        <div class="auth-form-header">
          <h2 class="auth-form-title">Create your account</h2>
          <p class="auth-form-sub">Get started with InvoiceFlow — it's free</p>
        </div>

        {% if messages %}
        <div class="auth-alerts">
          {% for message in messages %}
          <div class="auth-alert auth-alert-{{ message.tags }}">
            <i class="bi {% if 'success' in message.tags %}bi-check-circle{% elif 'error' in message.tags %}bi-x-circle{% else %}bi-info-circle{% endif %}"></i>
            {{ message }}
          </div>
          {% endfor %}
        </div>
        {% endif %}

        {% if form.errors %}
        <div class="auth-alerts">
          {% for field in form %}
            {% for error in field.errors %}
            <div class="auth-alert auth-alert-error">
              <i class="bi bi-x-circle"></i>
              {% if field.label and field.label != 'Hidden' %}{{ field.label }}: {% endif %}{{ error }}
            </div>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
          <div class="auth-alert auth-alert-error">
            <i class="bi bi-x-circle"></i>
            {{ error }}
          </div>
          {% endfor %}
        </div>
        {% endif %}

        <form method="POST" action="{% url 'account_signup' %}" class="auth-form" novalidate>
          {% csrf_token %}

          <div class="auth-field">
            <label class="auth-label" for="id_email">Email address</label>
            <div class="auth-input-wrap">
              <i class="bi bi-envelope auth-input-icon"></i>
              <input
                type="email"
                id="id_email"
                name="email"
                class="auth-input"
                placeholder="you@example.com"
                autocomplete="email"
                value="{{ form.email.value|default:'' }}"
                required
              >
            </div>
          </div>

          <div class="auth-field">
            <label class="auth-label" for="id_password1">Password</label>
            <div class="auth-input-wrap">
              <i class="bi bi-lock auth-input-icon"></i>
              <input
                type="password"
                id="id_password1"
                name="password1"
                class="auth-input"
                placeholder="Create a strong password"
                autocomplete="new-password"
                required
              >
              <button type="button" class="auth-input-toggle" onclick="togglePassword('id_password1', this)" tabindex="-1" aria-label="Toggle password visibility">
                <i class="bi bi-eye"></i>
              </button>
            </div>
            <div class="auth-hint">At least 8 characters. Mix letters, numbers and symbols.</div>
          </div>

          <div class="auth-field">
            <label class="auth-label" for="id_password2">Confirm password</label>
            <div class="auth-input-wrap">
              <i class="bi bi-lock-fill auth-input-icon"></i>
              <input
                type="password"
                id="id_password2"
                name="password2"
                class="auth-input"
                placeholder="Repeat your password"
                autocomplete="new-password"
                required
              >
              <button type="button" class="auth-input-toggle" onclick="togglePassword('id_password2', this)" tabindex="-1" aria-label="Toggle password visibility">
                <i class="bi bi-eye"></i>
              </button>
            </div>
          </div>

          <input type="hidden" name="next" value="{{ next }}">

          <button type="submit" class="auth-submit-btn">
            <span>Create Account</span>
            <i class="bi bi-arrow-right"></i>
          </button>

          <p class="auth-terms">
            By creating an account you agree to our
            <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.
          </p>
        </form>

        <div class="auth-footer-link">
          Already have an account? <a href="{% url 'account_login' %}">Sign in</a>
        </div>
      </div>
    </div>

  </div>

  <script>
    function togglePassword(fieldId, btn) {
      const input = document.getElementById(fieldId);
      const icon = btn.querySelector('i');
      if (input.type === 'password') {
        input.type = 'text';
        icon.className = 'bi bi-eye-slash';
      } else {
        input.type = 'password';
        icon.className = 'bi bi-eye';
      }
    }
  </script>
</body>
</html>
