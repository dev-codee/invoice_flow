{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<div class="page-header">
  <div class="page-header-left">
    <div style="display:flex;align-items:center;gap:12px;">
      <a href="{% url 'clients:list' %}" class="btn-icon" style="width:32px;height:32px;flex-shrink:0;text-decoration:none;"><i class="bi bi-arrow-left"></i></a>
      <div>
        <h1 class="page-title" style="margin-bottom:0;">{{ title }}</h1>
        {% if client %}<p class="page-subtitle">Updating client profile</p>{% endif %}
      </div>
    </div>
  </div>
</div>

<div style="display:grid;grid-template-columns:1fr 320px;gap:20px;max-width:880px;">
  <div class="card">
    <div class="card-header"><h3 class="card-header-title">Client Information</h3></div>
    <div class="card-body">
      <form method="post">
        {% csrf_token %}
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px;">
          <div style="grid-column:1/3;">
            <label class="form-label">Full Name / Company *</label>
            {{ form.name }}
            {% if form.name.errors %}<div style="color:#ef4444;font-size:11.5px;margin-top:4px;">{{ form.name.errors.0 }}</div>{% endif %}
          </div>
          <div>
            <label class="form-label">Email Address *</label>
            {{ form.email }}
            {% if form.email.errors %}<div style="color:#ef4444;font-size:11.5px;margin-top:4px;">{{ form.email.errors.0 }}</div>{% endif %}
          </div>
          <div>
            <label class="form-label">Phone Number</label>
            {{ form.phone }}
          </div>
          <div>
            <label class="form-label">Currency</label>
            {{ form.currency }}
          </div>
          <div>
            <label class="form-label">VAT / Tax ID</label>
            {{ form.tax_id }}
          </div>
          <div style="grid-column:1/3;">
            <label class="form-label">Billing Address</label>
            {{ form.billing_address }}
          </div>
          <div style="grid-column:1/3;">
            <label class="form-label">Internal Notes <span style="font-weight:400;color:var(--text-muted);">(not shown to client)</span></label>
            {{ form.notes }}
          </div>
        </div>
        <div style="display:flex;gap:10px;margin-top:20px;">
          <button type="submit" class="btn btn-primary"><i class="bi bi-check2"></i> Save Client</button>
          <a href="{% url 'clients:list' %}" class="btn btn-secondary">Cancel</a>
        </div>
      </form>
    </div>
  </div>

  {% if client %}
  <div>
    <div class="card">
      <div class="card-body" style="text-align:center;padding:24px 20px;">
        <div style="width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--brand-600),var(--brand-400));display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:700;color:#fff;margin:0 auto 12px;">{{ client.name|first|upper }}</div>
        <div style="font-size:16px;font-weight:700;margin-bottom:4px;">{{ client.name }}</div>
        <div style="font-size:12.5px;color:var(--text-muted);margin-bottom:16px;">{{ client.email }}</div>
        <a href="{% url 'invoices:create' %}?client={{ client.pk }}" class="btn btn-primary btn-sm" style="width:100%;justify-content:center;">
          <i class="bi bi-plus"></i> New Invoice
        </a>
        <a href="{% url 'clients:delete' client.pk %}" class="btn btn-danger btn-sm" style="width:100%;justify-content:center;margin-top:8px;">
          <i class="bi bi-person-x"></i> Deactivate
        </a>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
